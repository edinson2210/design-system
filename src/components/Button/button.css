.ds-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-weight: var(--button-weight);
  border: 1px solid transparent;
  cursor: pointer;
  transition: background-color 120ms ease, color 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
  &:focus-visible { outline: 2px solid var(--palette-primary, var(--primary-600, #4F46E5)); outline-offset: 2px; }
  &:active { opacity: 0.95; }
  &[data-loading='true'] { pointer-events: none; }
  &.ds-btn--no-anim { transition: none; }

  &.ds-btn--full {
    width: 100%;
  }

  /* Sizes */
  &.ds-btn--sm {
    padding: calc(var(--button-py) - 4px) calc(var(--button-px) - 4px);
    font-size: var(--button-size-sm);
  }
  &.ds-btn--md {
    padding: var(--button-py) var(--button-px);
    font-size: var(--button-size-md);
  }
  &.ds-btn--lg {
    padding: calc(var(--button-py) + 4px) calc(var(--button-px) + 4px);
    font-size: var(--button-size-lg);
  }

  /* Variants */
  &.ds-btn--variant-solid {
    background-color: var(--palette-primary, var(--primary-600, #4F46E5));
    color: var(--white, #FFFFFF);
    border-color: var(--palette-primary, var(--primary-600, #4F46E5));
    &:hover { background-color: var(--palette-hover, var(--primary-700)); }
    &[data-disabled='true'] { opacity: 0.5; }
  }

  &.ds-btn--variant-bordered {
    background-color: transparent;
    color: var(--palette-primary, var(--primary-600, #4F46E5));
    border-color: var(--palette-primary, var(--primary-600, #4F46E5));
    &:hover { background-color: var(--neutral-50); }
  }

  &.ds-btn--variant-light {
    background-color: var(--neutral-50, #F9FAFB);
    color: var(--palette-primary, var(--primary-600, #4F46E5));
    border-color: transparent;
    &:hover { background-color: var(--neutral-100, #F3F4F6); }
  }

  &.ds-btn--variant-flat {
    background-color: transparent;
    color: var(--palette-primary, var(--primary-600, #4F46E5));
    border-color: transparent;
    &:hover { background-color: var(--neutral-100, #F3F4F6); }
  }

  &.ds-btn--variant-faded {
    background-color: color-mix(in srgb, var(--palette-primary, var(--primary-600, #4F46E5)) 12%, transparent);
    color: var(--palette-primary, var(--primary-600, #4F46E5));
    border-color: color-mix(in srgb, var(--palette-primary, var(--primary-600, #4F46E5)) 25%, transparent);
  }

  &.ds-btn--variant-shadow {
    box-shadow: var(--shadow-sm, 0 1px 2px rgba(0,0,0,0.05));
    background-color: var(--palette-primary, var(--primary-600, #4F46E5));
    color: var(--white, #FFFFFF);
  }

  &.ds-btn--variant-ghost {
    background-color: transparent;
    color: var(--palette-primary, var(--primary-600, #4F46E5));
    border-color: transparent;
    &:hover { background-color: var(--neutral-100, #F3F4F6); }
  }

  /* Colors palette modifier */
  &.ds-btn--color-default { --palette-primary: var(--palette-default); --palette-hover: var(--palette-default-hover); }
  &.ds-btn--color-primary { --palette-primary: var(--palette-primary); --palette-hover: var(--palette-primary-hover); }
  &.ds-btn--color-secondary { --palette-primary: var(--palette-secondary); --palette-hover: var(--palette-secondary-hover); }
  &.ds-btn--color-tertiary { --palette-primary: var(--palette-tertiary); --palette-hover: var(--palette-tertiary-hover); }
  &.ds-btn--color-success { --palette-primary: var(--palette-success); --palette-hover: var(--palette-success-hover); }
  &.ds-btn--color-warning { --palette-primary: var(--palette-warning); --palette-hover: var(--palette-warning-hover); }
  &.ds-btn--color-danger { --palette-primary: var(--palette-danger); --palette-hover: var(--palette-danger-hover); }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  &[data-disabled='true'] { opacity: 0.5; cursor: not-allowed; }

  /* Radius variants */
  &.ds-btn--radius-none { border-radius: var(--radius-none); }
  &.ds-btn--radius-sm { border-radius: var(--radius-sm); }
  &.ds-btn--radius-md { border-radius: var(--radius-md); }
  &.ds-btn--radius-lg { border-radius: var(--radius-lg); }
  &.ds-btn--radius-full { border-radius: var(--radius-full); }

  /* Icon only */
  &.ds-btn--icon-only {
    padding: var(--button-py);
    aspect-ratio: 1 / 1;
  }

  /* Inner content */
  .ds-btn__content { display: inline-flex; align-items: center; }
  .ds-btn__spinner { display: inline-flex; align-items: center; }
  .ds-btn__spinner--start { margin-inline-end: 0.5rem; }
  .ds-btn__spinner--end { margin-inline-start: 0.5rem; }

  /* Anchor adjustments */
  &.ds-btn:link,
  &.ds-btn:visited {
    text-decoration: none;
    color: inherit;
  }
}

/* Simple spinner */
.ds-spinner {
  width: 1em;
  height: 1em;
  border-radius: 50%;
  border: 2px solid currentColor;
  border-right-color: transparent;
  animation: ds-spin 0.6s linear infinite;
}

@keyframes ds-spin {
  to { transform: rotate(360deg); }
}



